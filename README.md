# PNG转3D网格工具 (PNG to 3D Mesh Tool)

一个基于Web的交互式工具，可以将PNG图片转换为3D网格模型，支持实时预览和导出OBJ格式文件。

## 🌟 功能特点

### 核心功能
- **PNG图片转3D网格**: 将2D PNG图片转换为3D网格模型
- **智能遮罩生成**: 基于颜色选择或Alpha通道自动生成遮罩
- **实时预览**: 实时显示遮罩和网格生成效果
- **OBJ格式导出**: 支持导出标准OBJ格式的3D模型文件

### 高级功能
- **吸管工具**: 点击图像选择关键颜色进行智能抠图
- **Alpha阈值调节**: 精确控制遮罩生成范围
- **选区膨胀**: 支持遮罩边缘扩展和收缩
- **边缘精度优化**: 可调节网格边缘细节程度
- **多视图模式**: 支持线框、顶点、遮罩等多种显示模式

### 交互功能
- **画布拖拽**: 支持鼠标拖拽移动视图
- **视图重置**: 一键重置画布视角
- **进度显示**: 实时显示网格生成进度
- **多边形统计**: 显示生成的多边形数量

## 🚀 使用方法

### 1. 加载图片
- 点击"📂 打开图片 (PNG)"按钮
- 选择要转换的PNG格式图片

### 2. 定义遮罩 (抠图)
- **吸管工具**: 启用吸管工具，点击图像中的颜色来定义遮罩区域
- **Alpha阈值**: 调整透明度阈值来控制遮罩范围 (1-100)
- **选区膨胀**: 调整遮罩边缘的扩展程度 (0-20)

### 3. 生成网格
- 点击"▶ 生成网格"按钮
- 等待进度条完成

### 4. 优化网格
- **边缘精度**: 调整网格边缘的精细程度 (值越小越精细)
- 实时预览优化效果

### 5. 导出模型
- 点击"⬇ 导出 OBJ"按钮
- 下载生成的OBJ格式3D模型文件

## 🛠️ 技术实现

### 核心算法
- **Earcut三角剖分**: 高效的2D多边形三角化算法
- **Ramer-Douglas-Peucker算法**: 多边形边缘简化算法
- **迭代式RDP**: 避免堆栈溢出的优化实现

### 前端技术
- **HTML5 Canvas**: 2D图形渲染
- **原生JavaScript**: 高性能算法实现
- **CSS3**: 现代化UI界面
- **响应式设计**: 适配不同屏幕尺寸

### 算法流程
1. **图像加载**: 读取PNG图片像素数据
2. **遮罩生成**: 基于颜色选择或Alpha通道生成遮罩
3. **轮廓提取**: 从遮罩中提取多边形轮廓
4. **边缘简化**: 使用RDP算法简化多边形边缘
5. **三角剖分**: 使用Earcut算法进行三角化
6. **3D网格生成**: 将2D三角形转换为3D网格
7. **OBJ导出**: 生成标准OBJ格式文件

## 📁 文件结构

```
img2mesh/
├── img2mesh.html    # 主程序文件 (单文件应用)
└── README.md        # 项目说明文档
```

## 🎨 界面说明

### 侧边栏控制面板
- **图片加载区**: PNG文件选择和加载
- **遮罩定义区**: 吸管工具、阈值调节、膨胀控制
- **网格生成区**: 生成网格按钮和进度显示
- **网格优化区**: 边缘精度调节
- **视图控制区**: 重置视角、导出模型

### 主视图区域
- **3D画布**: 显示遮罩预览和网格模型
- **视图控制**: 线框、顶点、遮罩显示切换
- **模式指示**: 当前工作模式显示
- **状态栏**: 状态信息和多边形统计

## 🔧 配置参数

### 遮罩参数
- **Alpha阈值**: 1-100 (默认50)
- **选区膨胀**: 0-20 (默认0)

### 网格参数
- **边缘精度**: 1-200 (默认20，值越小越精细)

### 显示选项
- **显示红色遮罩**: 调试模式遮罩预览
- **显示线框**: 网格线框显示
- **显示顶点**: 网格顶点显示

## 📊 性能特点

### 算法优化
- **高效三角剖分**: Earcut算法确保快速三角化
- **边缘简化**: RDP算法减少不必要的顶点
- **迭代处理**: 避免递归导致的堆栈溢出

### 用户体验
- **实时预览**: 参数调整即时生效
- **进度反馈**: 长时间操作的进度显示
- **错误处理**: 友好的错误提示和处理

## 🎯 应用场景

- **3D建模**: 快速将2D图标转换为3D模型
- **游戏开发**: 生成简单的3D游戏资源
- **教育演示**: 学习3D图形学和网格生成
- **原型设计**: 快速验证3D设计概念

## 🔍 技术细节

### 遮罩生成算法
- 支持基于颜色的智能选择
- Alpha通道透明度处理
- 形态学操作(膨胀/腐蚀)

### 轮廓提取
- 边缘检测和跟踪
- 多边形轮廓优化
- 孔洞处理支持

### 三角剖分
- Earcut算法的完整实现
- 支持复杂多边形
- 高效三角化过程

### 3D网格生成
- 2D到3D的坐标转换
- 法向量计算
- OBJ格式标准化输出

## ⚡ 快速开始

1. 下载 `img2mesh.html` 文件
2. 在浏览器中打开文件
3. 加载PNG图片开始转换
4. 调整参数优化效果
5. 导出OBJ格式模型

## 📞 注意事项

- 仅支持PNG格式图片输入
- 建议使用具有明显轮廓的图片
- 复杂图片可能需要调整多个参数
- 导出的OBJ文件可用于大多数3D软件

---

**技术栈**: HTML5, CSS3, JavaScript, Canvas API
**算法**: Earcut, Ramer-Douglas-Peucker, 三角剖分
**许可证**: 开源免费使用